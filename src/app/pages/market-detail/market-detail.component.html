<app-loader *ngIf="loader"></app-loader>

@if ( !loader) {
<div class="title-wraper">
    <div class="w-full overflow-hidden bg-[#272D33]">
        <div class="game-title bg-bg_inputBgColor">
            <div class="left-info bg-bg_topBarEventDetailsBg">
            </div>
            <div class="right-info bg-bg_topBarEventDetailsBg">
            </div>

            <div class="flex-item relative w-full z-10">
                <div class="flex items-center gap-x-1 w-full ">
                    <span class="w-6 h-6">
                        <svg (click)="navigateBack()" xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                            viewBox="0 0 20 20" fill="" class="ng-tns-c191-0">
                            <path
                                d="M13.1213 17.0759L6.25 10.2046L13.1213 3.33325L14.0833 4.31242L8.19115 10.2046L14.0833 16.0968L13.1213 17.0759Z"
                                fill="#11E311" class="ng-tns-c191-0"></path>
                        </svg>
                    </span>
                    <div *ngIf="this.AllMarketList[0]?.oddsData?.inPlay" class="match-title bg-giftBoxGradient">
                        <div class="relative w-max flex-item-center">
                            <span class="match-span animate-pulse"></span>
                            <span class="match-item"></span>
                        </div>
                        <span class="match-status text-text_secondary">In Play</span>
                    </div>
                    <div *ngIf="!matchOddsData[0]?.oddsData?.inPlay" class="match-title bg-giftBoxGradient">
                        <span class="match-status text-text_secondary">
                            {{ this.AllMarketList[0]?.eventTime | date:'YYYY-MM-dd hh:mm:a' }}
                        </span>
                    </div>
                </div>
                <button (click)="gameRules(this.sportId);rules = true" class="info-btn" type="button">
                    <svg width="18" fill="white" height="18" viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_1717_31141)">
                            <path
                                d="M8.5 0.5C4.07841 0.5 0.5 4.078 0.5 8.5C0.5 12.9215 4.078 16.5 8.5 16.5C12.9216 16.5 16.5 12.922 16.5 8.5C16.5 4.07847 12.922 0.5 8.5 0.5ZM8.5 15.3837C4.70431 15.3837 1.61628 12.2957 1.61628 8.5C1.61628 4.70428 4.70431 1.61628 8.5 1.61628C12.2957 1.61628 15.3837 4.70428 15.3837 8.5C15.3837 12.2957 12.2957 15.3837 8.5 15.3837Z"
                                fill="var(--color-icon_secondary)"></path>
                            <path
                                d="M8.5003 7.1687C8.02642 7.1687 7.68945 7.36883 7.68945 7.66367V11.6757C7.68945 11.9285 8.02642 12.1812 8.5003 12.1812C8.95311 12.1812 9.32164 11.9285 9.32164 11.6757V7.66361C9.32164 7.36879 8.95311 7.1687 8.5003 7.1687Z"
                                fill="var(--color-icon_secondary)"></path>
                            <path
                                d="M8.50019 4.69409C8.01578 4.69409 7.63672 5.04159 7.63672 5.44175C7.63672 5.84194 8.01581 6.19997 8.50019 6.19997C8.97406 6.19997 9.35319 5.84194 9.35319 5.44175C9.35319 5.04159 8.97403 4.69409 8.50019 4.69409Z"
                                fill="var(--color-icon_secondary)"></path>
                        </g>
                        <defs>
                            <clipPath id="clip0_1717_31141">
                                <rect width="16" height="16" fill="white" transform="translate(0.5 0.5)"></rect>
                            </clipPath>
                        </defs>
                    </svg>
                </button>
            </div>
            <div class="match-eventname">
                <div class="w-full h-max">
                    <div class="match-event-wrapper">
                        <span class="eventName text-text_secondary">
                            {{this.AllMarketList[0]?.eventName? this.AllMarketList[0]?.eventName : ''}}
                        </span>
                        <span class="competitionName text-text_secondary5">
                            {{competitionName}}
                            <span class="hidden text-white lg:flex items-center gap-1.5">
                                LIVE
                                <svg width="13" height="11" viewBox="0 0 13 11" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M11.8182 0H1.18182C0.525909 0 0 0.543889 0 1.22222V8.55556C0 9.22778 0.525909 9.77778 1.18182 9.77778H4.13636V11H8.86364V9.77778H11.8182C12.4682 9.77778 12.9941 9.22778 12.9941 8.55556L13 1.22222C13 0.543889 12.4682 0 11.8182 0ZM11.8182 8.55556H1.18182V1.22222H11.8182V8.55556ZM8.86364 4.88889L4.72727 7.33333V2.44444L8.86364 4.88889Z"
                                        fill="#11e311"></path>
                                </svg>
                            </span>
                        </span>
                    </div>
                </div>
                <div></div>
            </div>
        </div>
    </div>
    <div class="page-tabs border-border_tertiary23 bg-bg_appBackgroundColor">
        <div class="tabs-wrapper">
            <div [ngClass]="{'active-item': openTab=='market'}" (click)="toggleBets('market')" class="tab-wrapper">
                <span class="text-text_secondary tab-title">Market</span>
            </div>
            <div class="tab-wrapper" [ngClass]="{'active-item': openTab=='matchInfo'}"
                (click)="toggleBets('matchInfo')">
                <span class="text-text_tertiary8 tab-title">
                    Match Info
                </span>
            </div>
            <div class="tab-wrapper" [ngClass]="{'active-item': isStartStream}"
                [ngClass]="isStartStream?'ActiveStreamTab':''" style="border-right:0px"
                (click)="isStartStream = true;clickwatch=true">
                <span class=" text-text_tertiary8 tab-title">
                    Live Video
                </span>
            </div>
            <div [ngClass]="{'active-item': openTab=='bets'}" (click)="toggleBets('bets')" class="tab-wrapper">
                <span class="text-text_tertiary8 tab-title">
                    Open Bets
                </span>
            </div>
            <div class="tab-overlay bg-bg_eventTopActiveTab"></div>
        </div>
    </div>
</div>

@if (openTab=='bets') {
<app-matched-bets class="lg:hidden"></app-matched-bets>
}

@if (openTab=='market') {
<div class="px-2 bg-black pt-2 border-solid">

    <ng-container *ngIf=" !streamShowValidation && (isMobile)">
        <app-video-real [eventId]="event_id" (dataEmitter)="hasStream($event)"></app-video-real>
    </ng-container>

    @if (loader) {
    <app-loader></app-loader>
    }

    <div class="marketContainer">
        <!-- match odds -->
        <ng-container *ngFor="let market of matchOddsDataUpdated ; trackBy: trackByFn;index as i">
            <div class="match-odds-wrapper text-text_secondary" [ngClass]="i!=0?'mt-2':''">
                <div class="match-container bg-cricketHeaderGradient">
                    <div class="match-effect vector one-cricket-bg"></div>
                    <div class="cricket-ico vector2 circket-2-bg"></div>
                    <div class="matchcontainer">
                        <span class="marketname">{{market.marketName}}</span>
                        <div class="flex-item-center gap-[3px]">
                            <ng-container
                                *ngIf="(matchedOddsPl[market.exMarketId] && (market.marketType=='MATCH_ODDS' || market.oddsType == 'MATCH_ODDS')); else elseTemplate">
                                <div type="button" class="match-box bg-bg_cashoutBtnGrad text-text_secondary2"
                                    *ngIf="market.oddsData.runners.length < 3">

                                    <div class="cashout-container active {{market.exMarketId}}">
                                        <span *ngIf="!cashoutValue[market.exMarketId]"
                                            class="oddstype text-text_secondary2 sm-text"
                                            (click)="calculateCashOut(market.exMarketId,market.oddsType)">

                                            Cash Out
                                        </span>
                                        <span *ngIf="cashoutValue[market.exMarketId]"
                                            class="text-text_secondary2 sm-text" (click)="onCashOutConfirm()">

                                            <strong style="display: inline-block;"
                                                [ngClass]="{'minus-book': cashoutValue[market.exMarketId] < 0 , 'plus-book' : cashoutValue[market.exMarketId] > 0 }">
                                                {{cashoutValue[market.exMarketId]}}</strong>
                                        </span>
                                    </div>


                                </div>
                            </ng-container>
                            <ng-template #elseTemplate>
                                <div type="button" *ngIf="market.oddsData.runners.length < 3"
                                    class="second-box bg-bg_cashoutBtnGrad text-text_secondary2">
                                    <div class="text-text_secondary2 sm-text">
                                        Cashout
                                    </div>
                                </div>

                            </ng-template>
                            <div *ngIf="market.oddsData.betDelay" class="bg-bg_primary5 rounded stop-watch">
                                <span class="w-4 h-4">
                                    <svg width="14" height="14" viewBox="0 0 10 10" fill="white"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <g id="Watch">
                                            <g id="62-Stopwatch">
                                                <path id="Vector"
                                                    d="M7.85933 3.20625L8.34683 2.72188C8.37597 2.69274 8.39908 2.65815 8.41485 2.62008C8.43062 2.58201 8.43874 2.54121 8.43874 2.5C8.43874 2.45879 8.43062 2.41799 8.41485 2.37992C8.39908 2.34185 8.37597 2.30726 8.34683 2.27813C8.31769 2.24899 8.2831 2.22588 8.24503 2.21011C8.20696 2.19434 8.16616 2.18622 8.12496 2.18622C8.08375 2.18622 8.04295 2.19434 8.00488 2.21011C7.96681 2.22588 7.93222 2.24899 7.90308 2.27813L7.41871 2.76563C6.8256 2.26054 6.08886 1.95448 5.31246 1.89063V1.25H5.93746C6.02034 1.25 6.09982 1.21708 6.15843 1.15847C6.21703 1.09987 6.24996 1.02038 6.24996 0.9375C6.24996 0.85462 6.21703 0.775134 6.15843 0.716529C6.09982 0.657924 6.02034 0.625 5.93746 0.625H4.06246C3.97958 0.625 3.90009 0.657924 3.84149 0.716529C3.78288 0.775134 3.74996 0.85462 3.74996 0.9375C3.74996 1.02038 3.78288 1.09987 3.84149 1.15847C3.90009 1.21708 3.97958 1.25 4.06246 1.25H4.68746V1.89063C3.84938 1.95984 3.0589 2.30873 2.44297 2.88126C1.82704 3.45379 1.42143 4.21673 1.29128 5.04753C1.16114 5.87832 1.31401 6.72875 1.72535 7.46221C2.13668 8.19566 2.78261 8.76958 3.55937 9.09176C4.33613 9.41394 5.19863 9.46569 6.00834 9.2387C6.81805 9.01171 7.52797 8.51915 8.02406 7.84014C8.52014 7.16112 8.77361 6.33508 8.74373 5.49468C8.71386 4.65429 8.40238 3.84832 7.85933 3.20625ZM4.99996 8.75C4.38189 8.75 3.7777 8.56672 3.2638 8.22334C2.7499 7.87996 2.34936 7.39191 2.11283 6.82089C1.87631 6.24987 1.81442 5.62153 1.935 5.01534C2.05558 4.40915 2.35321 3.85233 2.79025 3.41529C3.22729 2.97825 3.78411 2.68062 4.3903 2.56005C4.99649 2.43947 5.62482 2.50135 6.19584 2.73788C6.76686 2.9744 7.25492 3.37494 7.5983 3.88884C7.94168 4.40275 8.12496 5.00693 8.12496 5.625C8.12496 6.03538 8.04413 6.44174 7.88708 6.82089C7.73003 7.20003 7.49985 7.54453 7.20967 7.83471C6.91948 8.12489 6.57499 8.35508 6.19584 8.51212C5.8167 8.66917 5.41034 8.75 4.99996 8.75Z"
                                                    fill="var(--color-icon_secondary)"></path>
                                                <path id="Vector_2"
                                                    d="M5.31251 5.49688V3.75C5.31251 3.66712 5.27958 3.58763 5.22098 3.52903C5.16237 3.47042 5.08289 3.4375 5.00001 3.4375C4.91713 3.4375 4.83764 3.47042 4.77903 3.52903C4.72043 3.58763 4.68751 3.66712 4.68751 3.75V5.625C4.68727 5.66613 4.69515 5.7069 4.7107 5.74497C4.72625 5.78305 4.74917 5.81767 4.77813 5.84687L5.71563 6.78437C5.74468 6.81366 5.77924 6.83691 5.81733 6.85278C5.85541 6.86864 5.89625 6.87681 5.93751 6.87681C5.97876 6.87681 6.0196 6.86864 6.05769 6.85278C6.09577 6.83691 6.13033 6.81366 6.15938 6.78437C6.18867 6.75532 6.21192 6.72076 6.22778 6.68268C6.24365 6.6446 6.25182 6.60375 6.25182 6.5625C6.25182 6.52125 6.24365 6.4804 6.22778 6.44232C6.21192 6.40424 6.18867 6.36968 6.15938 6.34063L5.31251 5.49688Z"
                                                    fill="var(--color-icon_secondary)"></path>
                                            </g>
                                        </g>
                                    </svg>
                                </span>
                                <span class="betdelay text-text_secondary">{{market.oddsData.betDelay}}s</span>
                            </div>
                        </div>
                    </div>
                    <div class="backlay">
                        <span class="disable-btns"></span>
                        <span class="disable-btns"></span>
                        <span class="valued-btns">BACK</span>
                        <span class="valued-btns">LAY</span>
                        <span class="disable-btns"></span>
                        <span class="disable-btns"></span>
                    </div>
                </div>
                <div *ngIf="market.news" class="bookmakerNews">
                    <div class="marquee-container">
                        <div class="marquee-content">
                            <strong>{{ market.news }}</strong>
                        </div>
                    </div>
                </div>
                <div class="runnerContainer">
                    <ng-container *ngFor="let runner of market?.oddsData?.runners; trackBy: trackByFn;index as i">
                        <div class="border-b-border_tertiary20 runnerBox runner-container">
                            <div class="runnerStarter">
                                <div class="runnerId">
                                    <div class="runnerId-text">
                                        {{market.runnersData[runner.selectionId]}}
                                    </div>
                                    <div class="flex items-center gap-[3px]">
                                        <!-- ******* Local RESPONSE ProfitLOSS *********-->
                                        <ng-container
                                            *ngIf=" betData?.stackValue || (!BookmakersPl[market?.exMarketId] && !matchedOddsPl[market?.exMarketId])">
                                            <div class="runnerId-text market-value profit"
                                                *ngIf="isBetsSlipOpened == runner?.selectionId && marketId == market?.exMarketId && betData?.stackValue">

                                                ({{betData?.exposure ? (betData?.exposure | number : '1.2-2') :'0.00'
                                                }})
                                            </div>
                                            <div class="runnerId-text market-value loss"
                                                *ngIf="isBetsSlipOpened != runner?.selectionId && marketId == market?.exMarketId && betData?.stackValue">

                                                ({{betData?.stackValue ? (betData?.stackValue | number : '1.2-2')
                                                :'0.00'
                                                }})
                                            </div>
                                        </ng-container>
                                        <!-- ******* API RESPONSE ProfitLOSS *********-->
                                        <ng-container
                                            *ngIf="hasProfitAndLoss(matchedOddsPl[market?.exMarketId]?.[runner?.selectionId])">
                                            <span class="d-flex"
                                                [ngClass]="[matchedOddsPl[market?.exMarketId][runner?.selectionId].PROFIT > 0  ? 'profit' : 'loss']"
                                                *ngIf=" matchedOddsPl[market?.exMarketId]">
                                                &nbsp;({{matchedOddsPl[market?.exMarketId][runner?.selectionId].PROFIT
                                                ? (matchedOddsPl[market?.exMarketId][runner?.selectionId].PROFIT |
                                                number :
                                                '1.2-2') : '0.00' }})
                                                <span
                                                    [ngClass]="[matchedOddsPl[market?.exMarketId][runner?.selectionId].LOSS > 0  ? 'profit' : 'loss']"
                                                    *ngIf="matchedOddsPl[market?.exMarketId][runner?.selectionId].LOSS !== 0">
                                                    ({{matchedOddsPl[market?.exMarketId][runner?.selectionId].LOSS |
                                                    number
                                                    :'1.2-2'}})</span>
                                                <!-- BACK matchedOddsPl PL AFTER BET -->
                                                <ng-container *ngIf="type=='Back'">

                                                    <span
                                                        [ngClass]="(((runnerPrice -1) * betData?.stackValue) +
                                            (matchedOddsPl[market?.exMarketId][runner?.selectionId].PROFIT ? matchedOddsPl[market?.exMarketId][runner?.selectionId].PROFIT : 0 )) > 0  ? 'profit' : 'loss'"
                                                        *ngIf="isBetsSlipOpened == runner?.selectionId && marketId == market?.exMarketId && betData?.stackValue != 0 ">

                                                        ( {{ ((runnerPrice -1) * betData?.stackValue) +
                                                        (matchedOddsPl[market?.exMarketId][runner?.selectionId].PROFIT ?
                                                        matchedOddsPl[market?.exMarketId][runner?.selectionId].PROFIT :
                                                        0) |
                                                        number :
                                                        '1.2-2'}} )
                                                    </span>


                                                    <span
                                                        [ngClass]="((matchedOddsPl[market?.exMarketId][runner?.selectionId].PROFIT ) - betData?.stackValue ) > 0  ? 'profit' : 'loss'"
                                                        *ngIf="  runnerPrice && betData?.stackValue && betData?.stackValue != 0 && isBetsSlipOpened != runner?.selectionId
                                                     && marketId == market?.exMarketId">

                                                        ( {{
                                                        ((matchedOddsPl[market?.exMarketId][runner?.selectionId].PROFIT
                                                        ?
                                                        matchedOddsPl[market?.exMarketId][runner?.selectionId].PROFIT :
                                                        0 )
                                                        -
                                                        betData?.stackValue)
                                                        | number : '1.2-2' }})
                                                    </span>
                                                </ng-container>

                                                <!-- LAY matchedOddsPl PL AFTER BET -->
                                                <ng-container *ngIf="type=='Lay'">

                                                    <span
                                                        [ngClass]="(((runnerPrice -1) * betData?.stackValue) -
                                            (matchedOddsPl[market?.exMarketId][runner?.selectionId].LOSS ? matchedOddsPl[market?.exMarketId][runner?.selectionId].LOSS : 0 )) > 0  ? 'loss' : 'profit'"
                                                        *ngIf="isBetsSlipOpened == runner?.selectionId
                                                && marketId == market?.exMarketId
                                                && betData?.stackValue != 0 ">

                                                        ( {{(((runnerPrice -1) * betData?.stackValue) -
                                                        (matchedOddsPl[market?.exMarketId][runner?.selectionId].LOSS ?
                                                        matchedOddsPl[market?.exMarketId][runner?.selectionId] : 0)) *
                                                        (-1)
                                                        |
                                                        number : '1.2-2' }})
                                                    </span>


                                                    <span
                                                        [ngClass]="((matchedOddsPl[market?.exMarketId][runner?.selectionId].LOSS ) + betData?.stackValue ) > 0  ? 'profit' : 'loss'"
                                                        *ngIf="  runnerPrice  && betData?.stackValue && betData?.stackValue != 0 && isBetsSlipOpened != runner?.selectionId
                                        && marketId == market?.exMarketId">

                                                        ( {{
                                                        ((matchedOddsPl[market?.exMarketId][runner?.selectionId].LOSS ?
                                                        (matchedOddsPl[market?.exMarketId][runner?.selectionId].LOSS ) :
                                                        0 )
                                                        -
                                                        (-betData?.stackValue)) | number : '1.2-2' }})
                                                    </span>
                                                </ng-container>
                                            </span>
                                        </ng-container>
                                        <ng-container
                                            *ngIf="!hasProfitAndLoss(matchedOddsPl[market?.exMarketId]?.[runner?.selectionId])">
                                            <span class="d-flex"
                                                [ngClass]="[matchedOddsPl[market?.exMarketId][runner.selectionId] > 0  ? 'profit' : 'loss']"
                                                *ngIf=" matchedOddsPl[market?.exMarketId]">
                                                &nbsp;({{matchedOddsPl[market?.exMarketId][runner?.selectionId]
                                                ? (matchedOddsPl[market?.exMarketId][runner?.selectionId] | number :
                                                '1.2-2')
                                                : '0.00' }})

                                                <!-- BACK matchedOddsPl PL AFTER BET -->
                                                <ng-container *ngIf="type=='Back'">

                                                    <span
                                                        [ngClass]="(((runnerPrice -1) * betData?.stackValue) +
                                            (matchedOddsPl[market?.exMarketId][runner?.selectionId] ? matchedOddsPl[market?.exMarketId][runner?.selectionId] : 0 )) > 0  ? 'profit' : 'loss'"
                                                        *ngIf="isBetsSlipOpened == runner?.selectionId && marketId == market?.exMarketId && betData?.stackValue != 0 ">

                                                        ( {{ ((runnerPrice -1) * betData?.stackValue) +
                                                        (matchedOddsPl[market?.exMarketId][runner?.selectionId] ?
                                                        matchedOddsPl[market?.exMarketId][runner?.selectionId] : 0) |
                                                        number
                                                        :
                                                        '1.2-2'}} )
                                                    </span>


                                                    <span
                                                        [ngClass]="((matchedOddsPl[market?.exMarketId][runner?.selectionId] ) - betData?.stackValue ) > 0  ? 'profit' : 'loss'"
                                                        *ngIf="  runnerPrice && betData?.stackValue && betData?.stackValue != 0 && isBetsSlipOpened != runner?.selectionId
                                                    && marketId == market?.exMarketId">

                                                        ( {{ ((matchedOddsPl[market?.exMarketId][runner?.selectionId] ?
                                                        matchedOddsPl[market?.exMarketId][runner?.selectionId] : 0 ) -
                                                        betData?.stackValue)
                                                        | number : '1.2-2' }})
                                                    </span>
                                                </ng-container>

                                                <!-- LAY matchedOddsPl PL AFTER BET -->
                                                <ng-container *ngIf="type=='Lay'">

                                                    <span
                                                        [ngClass]="(((runnerPrice -1) * betData?.stackValue) -
                                            (matchedOddsPl[market?.exMarketId][runner?.selectionId] ? matchedOddsPl[market?.exMarketId][runner?.selectionId] : 0 )) > 0  ? 'loss' : 'profit'"
                                                        *ngIf="isBetsSlipOpened == runner?.selectionId
                                            && marketId == market?.exMarketId
                                        && betData?.stackValue != 0 ">

                                                        ( {{(((runnerPrice -1) * betData?.stackValue) -
                                                        (matchedOddsPl[market?.exMarketId][runner?.selectionId] ?
                                                        matchedOddsPl[market?.exMarketId][runner?.selectionId] : 0)) *
                                                        (-1)
                                                        |
                                                        number : '1.2-2' }})
                                                    </span>


                                                    <span
                                                        [ngClass]="((matchedOddsPl[market?.exMarketId][runner?.selectionId] ) + betData?.stackValue ) > 0  ? 'profit' : 'loss'"
                                                        *ngIf="  runnerPrice  && betData?.stackValue && betData?.stackValue != 0 && isBetsSlipOpened != runner?.selectionId
                                        && marketId == market?.exMarketId">

                                                        ( {{ ((matchedOddsPl[market?.exMarketId][runner?.selectionId] ?
                                                        (matchedOddsPl[market?.exMarketId][runner?.selectionId] ) : 0 )
                                                        -
                                                        (-betData?.stackValue)) | number : '1.2-2' }})
                                                    </span>
                                                </ng-container>
                                            </span>
                                        </ng-container>

                                        <ng-container
                                            *ngIf="hasProfitAndLoss(BookmakersPl[market?.exMarketId]?.[runner?.selectionId])">
                                            <span class="d-flex"
                                                [ngClass]="[BookmakersPl[market?.exMarketId][runner.selectionId].PROFIT > 0  ? 'profit' : 'loss']"
                                                *ngIf=" BookmakersPl[market?.exMarketId]">
                                                &nbsp;({{BookmakersPl[market?.exMarketId][runner?.selectionId].PROFIT
                                                ? (BookmakersPl[market?.exMarketId][runner?.selectionId].PROFIT | number
                                                :
                                                '1.2-2') :
                                                '0.00' }})
                                                <span
                                                    [ngClass]="[BookmakersPl[market?.exMarketId][runner.selectionId].LOSS > 0  ? 'profit' : 'loss']"
                                                    *ngIf="BookmakersPl[market?.exMarketId][runner?.selectionId].LOSS !== 0">
                                                    ({{BookmakersPl[market?.exMarketId][runner?.selectionId].LOSS |
                                                    number
                                                    :'1.2-2'}})</span>
                                                <!-- BACK BookmakersPl PL AFTER BET -->
                                                <ng-container *ngIf="type=='Back'">

                                                    <span
                                                        [ngClass]="(((runnerPrice -1) * betData?.stackValue) +
                                            (BookmakersPl[market?.exMarketId][runner?.selectionId].PROFIT ? BookmakersPl[market?.exMarketId][runner?.selectionId].PROFIT : 0 )) > 0  ? 'profit' : 'loss'"
                                                        *ngIf="isBetsSlipOpened == runner?.selectionId
                                            && marketId == market?.exMarketId
                                            && betData?.stackValue != 0 ">

                                                        ( {{ ((runnerPrice -1) * betData?.stackValue) +
                                                        (BookmakersPl[market?.exMarketId][runner?.selectionId].PROFIT ?
                                                        BookmakersPl[market?.exMarketId][runner?.selectionId].PROFIT :
                                                        0) |
                                                        number :
                                                        '1.2-2'}} )
                                                    </span>


                                                    <span
                                                        [ngClass]="((BookmakersPl[market?.exMarketId][runner?.selectionId].PROFIT ) - betData?.stackValue ) > 0  ? 'profit' : 'loss'"
                                                        *ngIf="  runnerPrice
                                        && betData?.stackValue
                                        && betData?.stackValue != 0
                                        && isBetsSlipOpened != runner?.selectionId
                                        && marketId == market?.exMarketId">

                                                        ( {{
                                                        ((BookmakersPl[market?.exMarketId][runner?.selectionId].PROFIT
                                                        ?
                                                        BookmakersPl[market?.exMarketId][runner?.selectionId].PROFIT : 0
                                                        ) -
                                                        betData?.stackValue) | number : '1.2-2' }})
                                                    </span>
                                                </ng-container>

                                                <!-- LAY BookmakersPl PL AFTER BET -->
                                                <ng-container *ngIf="type=='Lay'">
                                                    <span
                                                        [ngClass]="(((runnerPrice -1) * betData?.stackValue) -
                                            (BookmakersPl[market?.exMarketId][runner?.selectionId].LOSS ? BookmakersPl[market?.exMarketId][runner?.selectionId].LOSS : 0 )) > 0  ? 'loss' : 'profit'"
                                                        *ngIf="isBetsSlipOpened == runner?.selectionId
                                            && marketId == market?.exMarketId
                                            && betData?.stackValue != 0 ">

                                                        ( {{(((runnerPrice -1) * betData?.stackValue) -
                                                        (BookmakersPl[market?.exMarketId][runner?.selectionId].LOSS ?
                                                        BookmakersPl[market?.exMarketId][runner?.selectionId].LOSS : 0))
                                                        *
                                                        (-1) |
                                                        number :
                                                        '1.2-2' }} )
                                                    </span>


                                                    <span
                                                        [ngClass]="((BookmakersPl[market?.exMarketId][runner?.selectionId].LOSS ) + betData?.stackValue ) > 0  ? 'profit' : 'loss'"
                                                        *ngIf="  runnerPrice
                                        && betData?.stackValue
                                        && betData?.stackValue != 0
                                        && isBetsSlipOpened != runner?.selectionId
                                        && marketId == market?.exMarketId">

                                                        ( {{
                                                        ((BookmakersPl[market?.exMarketId][runner?.selectionId].LOSS ?
                                                        (BookmakersPl[market?.exMarketId][runner?.selectionId].LOSS ) :
                                                        0 )
                                                        -
                                                        (-betData?.stackValue)) | number : '1.2-2' }})
                                                    </span>
                                                </ng-container>
                                            </span>
                                        </ng-container>
                                        <ng-container
                                            *ngIf="!hasProfitAndLoss(BookmakersPl[market?.exMarketId]?.[runner?.selectionId])">
                                            <span class="d-flex"
                                                [ngClass]="[BookmakersPl[market?.exMarketId][runner.selectionId] > 0  ? 'profit' : 'loss']"
                                                *ngIf=" BookmakersPl[market?.exMarketId]">
                                                &nbsp;({{BookmakersPl[market?.exMarketId][runner?.selectionId]
                                                ? (BookmakersPl[market?.exMarketId][runner?.selectionId] | number :
                                                '1.2-2')
                                                :
                                                '0.00' }})

                                                <!-- BACK BookmakersPl PL AFTER BET -->
                                                <ng-container *ngIf="type=='Back'">

                                                    <span
                                                        [ngClass]="(((runnerPrice -1) * betData?.stackValue) +
                                            (BookmakersPl[market?.exMarketId][runner?.selectionId] ? BookmakersPl[market?.exMarketId][runner?.selectionId] : 0 )) > 0  ? 'profit' : 'loss'"
                                                        *ngIf="isBetsSlipOpened == runner?.selectionId
                                            && marketId == market?.exMarketId
                                        && betData?.stackValue != 0 ">

                                                        ( {{ ((runnerPrice -1) * betData?.stackValue) +
                                                        (BookmakersPl[market?.exMarketId][runner?.selectionId] ?
                                                        BookmakersPl[market?.exMarketId][runner?.selectionId] : 0) |
                                                        number
                                                        :
                                                        '1.2-2'}} )
                                                    </span>


                                                    <span
                                                        [ngClass]="((BookmakersPl[market?.exMarketId][runner?.selectionId] ) - betData?.stackValue ) > 0  ? 'profit' : 'loss'"
                                                        *ngIf="  runnerPrice
                                        && betData?.stackValue
                                        && betData?.stackValue != 0
                                        && isBetsSlipOpened != runner?.selectionId
                                        && marketId == market?.exMarketId">

                                                        ( {{ ((BookmakersPl[market?.exMarketId][runner?.selectionId] ?
                                                        BookmakersPl[market?.exMarketId][runner?.selectionId] : 0 ) -
                                                        betData?.stackValue) | number : '1.2-2' }})
                                                    </span>
                                                </ng-container>

                                                <!-- LAY BookmakersPl PL AFTER BET -->
                                                <ng-container *ngIf="type=='Lay'">
                                                    <span
                                                        [ngClass]="(((runnerPrice -1) * betData?.stackValue) -
                                            (BookmakersPl[market?.exMarketId][runner?.selectionId] ? BookmakersPl[market?.exMarketId][runner?.selectionId] : 0 )) > 0  ? 'loss' : 'profit'"
                                                        *ngIf="isBetsSlipOpened == runner?.selectionId
                                            && marketId == market?.exMarketId
                                            && betData?.stackValue != 0 ">

                                                        ( {{(((runnerPrice -1) * betData?.stackValue) -
                                                        (BookmakersPl[market?.exMarketId][runner?.selectionId] ?
                                                        BookmakersPl[market?.exMarketId][runner?.selectionId] : 0)) *
                                                        (-1) |
                                                        number :
                                                        '1.2-2' }} )
                                                    </span>


                                                    <span
                                                        [ngClass]="((BookmakersPl[market?.exMarketId][runner?.selectionId] ) + betData?.stackValue ) > 0  ? 'profit' : 'loss'"
                                                        *ngIf="  runnerPrice
                                        && betData?.stackValue
                                        && betData?.stackValue != 0
                                        && isBetsSlipOpened != runner?.selectionId
                                        && marketId == market?.exMarketId">

                                                        ( {{ ((BookmakersPl[market?.exMarketId][runner?.selectionId] ?
                                                        (BookmakersPl[market?.exMarketId][runner?.selectionId] ) : 0 ) -
                                                        (-betData?.stackValue)) | number : '1.2-2' }})
                                                    </span>
                                                </ng-container>
                                            </span>
                                        </ng-container>
                                    </div>

                                </div>
                            </div>
                            <div class="runnerBox-container">
                                <div title="1.24-1.27" class="w-full relative cursor-not-allowed">
                                    <div class="btns-wrapper relative">

                                        <div class="suspended"
                                            *ngIf="market?.oddsData?.status === 'SUSPENDED' || market?.oddsData?.status == 'CLOSED'|| runner?.status == 'SUSPENDED' || runner?.status == 'CLOSED' || runner?.status == 'REMOVED' ">
                                            <span class="stats-text">
                                                {{market?.oddsData?.status!= 'CLOSED' &&
                                                market?.oddsData.status!='SUSPENDED' ? runner?.status :
                                                market?.oddsData.status}}
                                            </span>

                                        </div>
                                        <button scaleclass="active:scale-[98%]"
                                            (click)="slipColor('back'); openBetslip(market.exMarketId,runner.selectionId,'back',runner.price.back[2].price,
                     market.min, market.max,market.marketType, market.runnersData[runner.selectionId],runner.price.back[2].size,2,market.oddsType,null,market.oddsData.betDelay)"
                                            class="marketBox-wrapper !hidden md:!flex bg-bg_backBtnBgColor"
                                            type="button">
                                            <span
                                                class=" text-sm">{{((runner.price.back[2].price)?(runner.price.back[2].price|
                                                number):'0' )}}</span>
                                            <span class="text-x">{{(runner.price.back[2].size) |shortNumber}}</span>
                                        </button>
                                        <button scaleclass="active:scale-[98%]"
                                            (click)="slipColor('back'); openBetslip(market.exMarketId,runner.selectionId,'back',runner.price.back[1].price,
                   market.min, market.max,market.marketType, market.runnersData[runner.selectionId],runner.price.back[1].size,1,market.oddsType,null,market.oddsData.betDelay)"
                                            class="marketBox-wrapper !hidden md:!flex bg-bg_backBtnBgColor"
                                            type="button">
                                            <span
                                                class=" text-sm">{{((runner.price.back[1].price)?(runner.price.back[1].price|
                                                number):'0' )}}</span>
                                            <span class="text-x">{{(runner.price.back[1].size) |shortNumber}}</span>
                                        </button>
                                        <button scaleclass="active:scale-[98%]"
                                            (click)="slipColor('back'); openBetslip(market.exMarketId,runner.selectionId,'back',runner.price.back[0].price,
                   market.min, market.max,market.marketType, market.runnersData[runner.selectionId],runner.price.back[0].size,0,market.oddsType,null,market.oddsData.betDelay)"
                                            class="marketBox-wrapper bg-bg_backBtnBgColor" type="button">
                                            <span
                                                class="text-sm">{{((runner.price.back[0].price)?(runner.price.back[0].price|
                                                number):'0' )}}</span>
                                            <span class="text-x">{{(runner.price.back[0].size) |shortNumber}}</span>
                                        </button>


                                        <button scaleclass="active:scale-[98%]"
                                            (click)="slipColor('lay'); openBetslip(market.exMarketId,runner.selectionId,'lay',runner.price.lay[0].price,
                   market.min, market.max,market.marketType, market.runnersData[runner.selectionId],runner.price.back[0].size,0,market.oddsType,null,market.oddsData.betDelay)"
                                            class="marketBox-wrapper bg-bg_layBtnBgColor" type="button">
                                            <span
                                                class="text-sm">{{((runner.price.lay[0].price)?(runner.price.lay[0].price|
                                                number):'0' )}}</span>
                                            <span class="text-x">{{(runner.price.lay[0].size) |shortNumber}}</span>
                                        </button>
                                        <button scaleclass="active:scale-[98%]"
                                            (click)="slipColor('lay'); openBetslip(market.exMarketId,runner.selectionId,'lay',runner.price.lay[1].price,
                                market.min, market.max,market.marketType, market.runnersData[runner.selectionId],runner.price.back[1].size,1,market.oddsType,null,market.oddsData.betDelay)"
                                            class="marketBox-wrapper bg-bg_layBtnBgColor !hidden md:!flex"
                                            type="button">
                                            <span
                                                class="text-sm">{{((runner.price.lay[1].price)?(runner.price.lay[1].price|
                                                number):'0' )}}</span>
                                            <span class="text-x">{{(runner.price.lay[1].size) |shortNumber}}</span>
                                        </button>
                                        <button scaleclass="active:scale-[98%]"
                                            (click)="slipColor('lay'); openBetslip(market.exMarketId,runner.selectionId,'lay',runner.price.lay[2].price,
                  market.min, market.max,market.marketType, market.runnersData[runner.selectionId],runner.price.back[2].size,2,market.oddsType,null,market.oddsData.betDelay)"
                                            class="marketBox-wrapper bg-bg_layBtnBgColor !hidden md:!flex"
                                            type="button">
                                            <span
                                                class="text-sm">{{((runner.price.lay[2].price)?(runner.price.lay[2].price|
                                                number):'0' )}}</span>
                                            <span class="text-x">{{(runner.price.lay[2].size) |shortNumber}}</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="lg:hidden w-full" id="betslip" *ngIf="isBetsSlipOpened == runner.selectionId && marketId == market.exMarketId 
                && (market?.oddsData?.status=='OPEN' || market?.oddsData?.status=='ONLINE') ">
                            <app-betslip style="padding: 0;" (valueEventPlaceBet)="getValueBetSlip($event)"
                                [item]="betplaceObj"></app-betslip>
                        </div>
                    </ng-container>
                </div>
            </div>
        </ng-container>


        <div class="fancyul">
            <ul id="fancyul">
                <li *ngFor="let item of marketlistFancy" (click)="changeFancyMarket(item.id,false)" [attr.id]="item.id"
                    [ngClass]="{'border-[#11e311] bg-bg_text_brand_primary !text-white' : selectedFancyMarket==item.id}"
                    class="fancyItem">
                    <span class="fancyText">
                        {{item.mName == "Popular" ? "ALL" : item.mName }}
                    </span>
                </li>
            </ul>
        </div>


        <!-- fancy market -->
        <div class="flex flex-col gap-[1px] w-full">
            <ng-container *ngFor="let market of AllFancyMarketsFiltered ;index as i; trackBy: trackByFn">
                <div class="w-full" *ngIf="market.oddsType!='SPORTSBOOK'">
                    <div *ngIf="i === 0" class="grid grid-cols-12 w-full py-1.5">
                        <div class="fancy-market"></div>
                        <div class="market-status text-sm">
                            <span class="fancy-text">No</span>
                            <span class="fancy-text">Yes</span>
                            <span class="hidden md:flex md:col-span-2"></span>
                        </div>
                    </div>
                    <div class="bg-bg_color_primary fancy-title !my-0">
                        <div title="Match 1st Over" id="1" class="grid grid-cols-12">
                            <div class="fancy-wrapper">
                                <div class="fancyWrapper">
                                    <div class="fancyContent">
                                        <div class="fancyMarketName flex-col truncate !items-start">
                                            <div class="truncate block max-w-full">{{market.marketName}}</div>

                                            <a (click)="fancyPL(sportId, market.exMarketId)" class="p-0"
                                                style="display:flex; font-size:12px;font-weight:400"
                                                *ngIf="FancyPl[market?.exMarketId]">
                                                <span class="d-flex"
                                                    [ngClass]="[FancyPl[market?.exMarketId] > 0  ? 'profit' : 'loss']"
                                                    *ngIf=" FancyPl[market?.exMarketId]">

                                                    {{FancyPl[market?.exMarketId]
                                                    ? (FancyPl[market?.exMarketId]
                                                    | number :
                                                    '1.2-2') : '0.00'
                                                    }}
                                                </span>
                                            </a>
                                            <div class="runnerId-text market-value"
                                                *ngIf="betData?.exposure && betData?.stackValue && betData?.exposure?.[market.exMarketId]">
                                                {{betData?.exposure}} - {{betData?.stackValue}}

                                            </div>
                                        </div>
                                        <div class="marketName-wrapper">
                                            <div class="spanMark">
                                                {{market.marketName}}
                                            </div>
                                            <div class="spanOverlay"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="fancyDelay">
                                    <svg version="1.0" height="15" width="15" xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 840.000000 936.000000" preserveAspectRatio="xMidYMid meet">
                                        <g transform="translate(0.000000,936.000000) scale(0.100000,-0.100000)"
                                            fill="#d3d3d3" stroke="none">
                                            <path
                                                d="M3472 8818 l3 -243 243 -3 242 -2 0 -244 0 -243 -122 -12 c-1359 -130 -2543 -950 -3143 -2176 -155 -318 -271 -677 -334 -1035 -75 -424 -73 -934 5 -1360 226 -1229 1014 -2267 2136 -2810 694 -335 1447 -455 2228 -354 567 74 1147 294 1640 624 792 530 1374 1353 1605 2270 133 529 156 1092 65 1627 -175 1029 -775 1959 -1645 2552 -539 367 -1135 586 -1792 657 l-163 18 0 243 0 243 243 2 242 3 3 243 2 242 -730 0 -730 0 2 -242z m1138 -1242 c478 -59 937 -216 1346 -463 765 -461 1323 -1208 1543 -2067 190 -738 131 -1502 -171 -2206 -175 -408 -460 -814 -789 -1122 -519 -487 -1138 -787 -1845 -895 -164 -25 -204 -27 -484 -27 -325 -1 -422 7 -685 60 -1170 231 -2155 1089 -2543 2214 -222 647 -250 1318 -82 1975 283 1104 1112 1999 2195 2372 215 74 531 144 735 162 63 6 133 13 155 15 85 9 506 -4 625 -18z">
                                            </path>
                                            <path
                                                d="M3960 5620 c0 -654 -3 -1010 -10 -1010 -5 0 -41 -30 -80 -66 -51 -49 -80 -86 -105 -138 -133 -272 18 -605 310 -681 132 -34 277 -11 391 63 202 131 276 400 169 618 -25 52 -54 89 -105 138 -39 36 -75 66 -80 66 -7 0 -10 356 -10 1010 l0 1010 -240 0 -240 0 0 -1010z">
                                            </path>
                                        </g>
                                    </svg>
                                    <span class="font-[480] text-[14px] text-white">
                                        {{market.oddsData.betDelay}}s
                                    </span>
                                </div>
                                <div class="minMax showMobile">
                                    <div class="relative group cursor-not-allowed text-white">
                                        <svg class="opacity-50" xmlns="http://www.w3.org/2000/svg" width="15"
                                            height="15" viewBox="0 0 15 15">
                                            <path fill="currentColor" fill-rule="evenodd"
                                                d="M6.76 5.246V3.732h1.48v1.514H6.76zm.74 8.276a5.86 5.86 0 0 0 3.029-.83 5.839 5.839 0 0 0 2.163-2.163 5.86 5.86 0 0 0 .83-3.029 5.86 5.86 0 0 0-.83-3.029 5.839 5.839 0 0 0-2.163-2.163 5.86 5.86 0 0 0-3.029-.83 5.86 5.86 0 0 0-3.029.83A5.839 5.839 0 0 0 2.308 4.47a5.86 5.86 0 0 0-.83 3.029 5.86 5.86 0 0 0 .83 3.029 5.839 5.839 0 0 0 2.163 2.163 5.86 5.86 0 0 0 3.029.83zM7.5 0c1.37 0 2.638.343 3.804 1.028a7.108 7.108 0 0 1 2.668 2.668A7.376 7.376 0 0 1 15 7.5c0 1.37-.343 2.638-1.028 3.804a7.108 7.108 0 0 1-2.668 2.668A7.376 7.376 0 0 1 7.5 15a7.376 7.376 0 0 1-3.804-1.028 7.243 7.243 0 0 1-2.668-2.686A7.343 7.343 0 0 1 0 7.5c0-1.358.343-2.62 1.028-3.786a7.381 7.381 0 0 1 2.686-2.686A7.343 7.343 0 0 1 7.5 0zm-.74 11.268V6.761h1.48v4.507H6.76z">
                                            </path>
                                        </svg>
                                        <div class="minmax-text group-hover:h-[32px] md:!hidden">
                                            Min:{{market.min}} | Max:{{market.max}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="fancy-wrap">
                                <div class="w-full h-full col-span-2 md:col-span-4">
                                    <div id="hideScrollBar">
                                        <div class="fancy-cont relative">
                                            <div class="suspended"
                                                *ngIf="market?.oddsData?.status == 'BALLRUN' || market?.oddsData?.status === 'SUSPENDED' || market?.oddsData?.status == 'CLOSED'|| market.oddsData.runners[0]?.status == 'SUSPENDED' || market.oddsData.runners[0]?.status == 'CLOSED' || market.oddsData.runners[0]?.status == 'REMOVED' || market.oddsData.runners[0]?.status == 'BALLRUN' ">
                                                <span class="stats-text">
                                                    {{market?.oddsData?.status!= 'CLOSED' &&
                                                    market?.oddsData.status!='SUSPENDED' && market?.oddsData?.status !=
                                                    'BALLRUN' ? market.oddsData.runners[0]?.status :
                                                    market?.oddsData.status}}
                                                </span>

                                            </div>
                                            <div class="w-full h-full">
                                                <div (click)="slipColor('lay'); openBetslip(market.exMarketId,market.oddsData.runners[0].selectionId,'lay',market.oddsData.runners[0].price.lay[0].price,
                                             market.min, market.max,market.oddsType, market.marketName,market.oddsData.runners[0].price.lay[0].size,0,market.marketType,market.isSuperFancy,market.oddsData.betDelay)"
                                                    class="fancy-container bg-bg_color_layBtnBg">
                                                    <span id="oddBtnPrice" class="oddBtnPrice">
                                                        {{(market.oddsData.runners[0].price.lay[0].price) | number}}
                                                    </span><span id="oddBtnSize"
                                                        class="oddBtnSize">{{market.oddsData.runners[0].price.lay[0].size
                                                        |
                                                        shortNumber}}</span>
                                                </div>
                                            </div>
                                            <div class="w-full h-full">
                                                <div (click)="slipColor('back'); openBetslip(market.exMarketId,market.oddsData.runners[0].selectionId,'back',market.oddsData.runners[0].price.back[0].price,
                                             market.min, market.max,market.oddsType, market.marketName,market.oddsData.runners[0].price.back[0].size,0,market.marketType,market.isSuperFancy,market.oddsData.betDelay)"
                                                    class="fancyBack py-[1px] bg-bg_color_backBtnBg">
                                                    <span id="oddBtnPrice"
                                                        class="oddBtnPrice">{{(market.oddsData.runners[0].price.back[0].price)|
                                                        number}}</span>
                                                    <span id="oddBtnSize" class="oddBtnSize">
                                                        {{market.oddsData.runners[0].price.back[0].size | shortNumber}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <span class="minBet">
                                    <div class="minBet-wrap">
                                        <div class="flex-item-center">
                                            <span class="text-[10px] text-center ">
                                                Min Bet :
                                            </span>
                                            <span class="text-[10px] text-center">
                                                {{market.min}}
                                            </span>
                                        </div>
                                        <div class="flex items-center justify-start">
                                            <span class="text-[10px] text-center ">Max Bet :</span>
                                            <span class="text-[10px] text-center">{{market.max}}</span>
                                        </div>
                                    </div>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div *ngIf="market.news" class="bookmakerNews">
                        <div class="marquee-container">
                            <div class="marquee-content">
                                <strong>{{ market.news }}</strong>
                            </div>
                        </div>
                    </div>

                    <div class="lg:hidden w-full" id="betslip" *ngIf="isBetsSlipOpened == market.oddsData.runners[0].selectionId && marketId == market.exMarketId 
                                 && (market?.oddsData?.status=='OPEN' || market?.oddsData?.status=='ONLINE') ">
                        <app-betslip style="padding: 0;" (valueEventPlaceBet)="getValueBetSlip($event)"
                            [item]="betplaceObj"></app-betslip>
                    </div>
                </div>

                <!-- sportsbook -->
                <div class="w-full py-1.5" *ngIf="market.oddsType=='SPORTSBOOK'">
                    <div class="sportbook">
                        <div class="sportbook-wrapper">
                            <div class="sportbook-title" title="Any player to score 50">
                                <span>{{market.marketName}} </span>
                                <span class="text-x font-normal"> </span>
                            </div>
                        </div>
                        <div class="sportbook-status">
                            <span class="sport-space flex"></span>
                            <span class="sport-space flex"></span>
                            <span class="hidden md:flex"></span>
                        </div>
                    </div>
                    <div class=" bg-bg_color_primary sportRunner">
                        <ng-container *ngFor="let runner of market.oddsData.runners">
                            <div title="yes" id="14" class="sportWrap">
                                <div class="sport-items">
                                    <div class="sport-items-wrapper">
                                        <div class="sport-container">
                                            <div class="sportId flex-col truncate !items-start">
                                                <div class="truncate max-w-full">
                                                    {{market.runnersData[runner.selectionId]}}
                                                </div>
                                                <!-- ******* Local RESPONSE ProfitLOSS *********-->

                                                <div class="runnerId-text market-value"
                                                    *ngIf="betData?.exposure && betData?.stackValue">
                                                    <span class="profit"
                                                        *ngIf="isBetsSlipOpened == runner?.selectionId && marketId == market?.exMarketId ">
                                                        ({{betData?.exposure ? (betData?.exposure | number : '1.2-2')
                                                        :'0.00' }})
                                                    </span>
                                                    <span class="loss"
                                                        *ngIf="isBetsSlipOpened != runner?.selectionId && marketId == market?.exMarketId ">
                                                        ({{betData?.stackValue }})
                                                    </span>
                                                </div>
                                                <!-- ******* API RESPONSE ProfitLOSS *********-->
                                                <ng-container>
                                                    <div class="runnerId-text market-value">
                                                        <span class="d-flex"
                                                            [ngClass]="[SportsbookPl[market?.exMarketId][runner.selectionId] > 0  ? 'profit' : 'loss']"
                                                            *ngIf=" SportsbookPl[market?.exMarketId]">
                                                            &nbsp;({{SportsbookPl[market?.exMarketId][runner?.selectionId]
                                                            ? (SportsbookPl[market?.exMarketId][runner?.selectionId] |
                                                            number :
                                                            '1.2-2') :
                                                            '0.00' }})
                                                        </span>
                                                    </div>
                                                </ng-container>
                                            </div>
                                            <div class="sportData">
                                                <div class="leading-relaxed break-words font-bold text-xs md:text-sm">
                                                    {{market.runnersData[runner.selectionId]}}
                                                </div>
                                                <div class="Subdata"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="sport-first">
                                    </div>
                                    <div class="sport-second">
                                    </div>
                                    <div class="minMax showMobile">
                                        <div class="relative group cursor-not-allowed text-white">
                                            <svg class="opacity-50" xmlns="http://www.w3.org/2000/svg" width="15"
                                                height="15" viewBox="0 0 15 15">
                                                <path fill="currentColor" fill-rule="evenodd"
                                                    d="M6.76 5.246V3.732h1.48v1.514H6.76zm.74 8.276a5.86 5.86 0 0 0 3.029-.83 5.839 5.839 0 0 0 2.163-2.163 5.86 5.86 0 0 0 .83-3.029 5.86 5.86 0 0 0-.83-3.029 5.839 5.839 0 0 0-2.163-2.163 5.86 5.86 0 0 0-3.029-.83 5.86 5.86 0 0 0-3.029.83A5.839 5.839 0 0 0 2.308 4.47a5.86 5.86 0 0 0-.83 3.029 5.86 5.86 0 0 0 .83 3.029 5.839 5.839 0 0 0 2.163 2.163 5.86 5.86 0 0 0 3.029.83zM7.5 0c1.37 0 2.638.343 3.804 1.028a7.108 7.108 0 0 1 2.668 2.668A7.376 7.376 0 0 1 15 7.5c0 1.37-.343 2.638-1.028 3.804a7.108 7.108 0 0 1-2.668 2.668A7.376 7.376 0 0 1 7.5 15a7.376 7.376 0 0 1-3.804-1.028 7.243 7.243 0 0 1-2.668-2.686A7.343 7.343 0 0 1 0 7.5c0-1.358.343-2.62 1.028-3.786a7.381 7.381 0 0 1 2.686-2.686A7.343 7.343 0 0 1 7.5 0zm-.74 11.268V6.761h1.48v4.507H6.76z">
                                                </path>
                                            </svg>
                                            <div class="minmax-text md:!hidden group-hover:!h-[32px]">
                                                Min:{{market.min}} | Max:{{market.max}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="sport-wrapper">
                                    <div class="w-full h-full col-span-2 md:col-span-4">
                                        <div id="hideScrollBar">
                                            <div class="sport-wrap">
                                                <div class="flex w-full bg-green-300 relative">

                                                    <div class="suspended-SportsBook"
                                                        *ngIf="market?.oddsData?.status === 'SUSPENDED' || market?.oddsData?.status == 'CLOSED'|| runner?.status == 'SUSPENDED' || runner?.status == 'CLOSED' || runner?.status == 'REMOVED' ">
                                                        <span class="stats-text">
                                                            {{market?.oddsData?.status!= 'CLOSED' &&
                                                            market?.oddsData.status!='SUSPENDED' ? runner?.status :
                                                            market?.oddsData.status}}
                                                        </span>

                                                    </div>
                                                    <div class="w-full h-full">
                                                        <div (click)="slipColor('sportbook'); openBetslip(market.exMarketId,runner.selectionId,'back',runner.price.back[0].price,
                                                         market.min, market.max,market.oddsType, market.marketName,runner.price.back[0].size,0,market.marketType,market.isSuperFancy,market.oddsData.betDelay)"
                                                            class="fancyBack">
                                                            <span id="oddBtnPrice" class="oddBtnPrice">
                                                                {{(runner.price.back[0].price)| number}}
                                                            </span>
                                                            <span id="oddBtnSize" class="oddBtnSize">
                                                                {{(runner.price.back[0].size) | shortNumber}}
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <span class="minBet">
                                        <div class="minBet-wrap">
                                            <div class="flex-item-center">
                                                <span class="text-[10px] text-center ">
                                                    Min Bet :
                                                </span>
                                                <span class="text-[10px] text-center">
                                                    {{market.min}}
                                                </span>
                                            </div>
                                            <div class="flex items-center justify-start">
                                                <span class="text-[10px] text-center ">Max Bet :</span>
                                                <span class="text-[10px] text-center">{{market.max}}</span>
                                            </div>
                                        </div>
                                    </span>
                                </div>
                            </div>
                            <div class="lg:hidden w-full" id="betslip" *ngIf="isBetsSlipOpened == runner.selectionId && marketId == market.exMarketId 
                     && (market?.oddsData?.status=='OPEN' || market?.oddsData?.status=='ONLINE') ">
                                <app-betslip style="padding: 0;" (valueEventPlaceBet)="getValueBetSlip($event)"
                                    [item]="betplaceObj"></app-betslip>
                            </div>

                        </ng-container>
                    </div>
                </div>
            </ng-container>
        </div>



    </div>
</div>
}
}

@if (rules) {
<div class="rules-overlay bg-bg_color_popUpParentBg">
    <div class="rules-bg"></div>

    <div class="rule-wrapper popUpOpenAnimation1">
        <div class="ruleas">
            <h2 class="rule-heading text-text_color_primary1">
                Rules-{{rulesInfo?.sportName}}
            </h2>
            <button (click)="rules = false" type="button" aria-label="Close" title="Close">
                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 16 16" fill="#fff"
                    class="close-rules-btn">
                    <g clip-path="url(#clip0_406_1676)">
                        <path
                            d="M9.46585 8.01314L15.6959 1.78287C16.1014 1.37762 16.1014 0.722377 15.6959 0.317124C15.2907 -0.0881297 14.6354 -0.0881297 14.2302 0.317124L7.99991 6.5474L1.76983 0.317124C1.36438 -0.0881297 0.709336 -0.0881297 0.304082 0.317124C-0.101361 0.722377 -0.101361 1.37762 0.304082 1.78287L6.53416 8.01314L0.304082 14.2434C-0.101361 14.6487 -0.101361 15.3039 0.304082 15.7092C0.506045 15.9113 0.771595 16.0129 1.03695 16.0129C1.30232 16.0129 1.56768 15.9113 1.76983 15.7092L7.99991 9.47889L14.2302 15.7092C14.4323 15.9113 14.6977 16.0129 14.9631 16.0129C15.2284 16.0129 15.4938 15.9113 15.6959 15.7092C16.1014 15.3039 16.1014 14.6487 15.6959 14.2434L9.46585 8.01314Z"
                            fill="#fff"></path>
                    </g>
                    <defs>
                        <clipPath id="clip0_406_1676">
                            <rect width="16" height="16" fill="#fff"></rect>
                        </clipPath>
                    </defs>
                </svg>
            </button>
        </div>
        <div class="rule-text-wrapper">
            <div class="rule-container">
                <div class="rule-item"></div>
                <!-- <div class="rule-search-container border-border_color_primary1">
                    <div class="flex-shrink-0 w-max">
                        <svg fill="#fff" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M21.71,20.29,18,16.61A9,9,0,1,0,16.61,18l3.68,3.68a1,1,0,0,0,1.42,0A1,1,0,0,0,21.71,20.29ZM11,18a7,7,0,1,1,7-7A7,7,0,0,1,11,18Z">
                            </path>
                        </svg>
                    </div>
                    <input class="rule-searchbar text-text_color_primary1" placeholder="Search rules..." value="">
                </div> -->
                <div class="flex items-center gap-2">
                    <!-- <span class="text-sm text-[#626262]">2
                        rules
                    </span> -->
                    <!-- <button (click)="openRules = !openRules" class="expand-btn text-text_color_primary1">
                        {{openRules ? 'Collapse All' : 'Expand All'}}
                    </button> -->
                </div>

                <div class="space-y-2 mt-4">
                    <div [ngClass]="{'!border-[#11e311]': openRules}" class="group rule-btn-wrapper">
                        <button [ngClass]="{'rule-after': openRules}" (click)="openRules = !openRules"
                            class="rule-text-heading" aria-expanded="false" aria-controls="rules-content-0"
                            aria-label="Toggle rules for General Rules">
                            <span class="rule-text">General
                                Rules
                            </span>
                            <span [ngClass]="{'rotate-180': openRules}" class="toggle-text" aria-hidden="true">
                                <svg width="20" height="20" viewBox="0 0 30 30" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <mask id="path-1-inside-1_3039_16413" fill="white">
                                        <path
                                            d="M30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0C23.2843 0 30 6.71573 30 15ZM2.08392 15C2.08392 22.1334 7.86664 27.9161 15 27.9161C22.1334 27.9161 27.9161 22.1334 27.9161 15C27.9161 7.86664 22.1334 2.08392 15 2.08392C7.86664 2.08392 2.08392 7.86664 2.08392 15Z">
                                        </path>
                                    </mask>
                                    <path
                                        d="M30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0C23.2843 0 30 6.71573 30 15ZM2.08392 15C2.08392 22.1334 7.86664 27.9161 15 27.9161C22.1334 27.9161 27.9161 22.1334 27.9161 15C27.9161 7.86664 22.1334 2.08392 15 2.08392C7.86664 2.08392 2.08392 7.86664 2.08392 15Z"
                                        fill="#fff" stroke="#fff" stroke-width="2" mask="#fff"></path>
                                    <path
                                        d="M15.7071 9.29289C15.3166 8.90237 14.6834 8.90237 14.2929 9.29289L7.92893 15.6569C7.53841 16.0474 7.53841 16.6805 7.92893 17.0711C8.31946 17.4616 8.95262 17.4616 9.34315 17.0711L15 11.4142L20.6569 17.0711C21.0474 17.4616 21.6805 17.4616 22.0711 17.0711C22.4616 16.6805 22.4616 16.0474 22.0711 15.6569L15.7071 9.29289ZM16 11V10H14V11H16Z"
                                        fill="#fff"></path>
                                </svg>
                            </span>
                        </button>

                        <div [ngClass]="{'!max-h-0 overflow-hidden': !openRules}" id="rules-content-0"
                            class="rule-text-container" aria-labelledby="rules-header-0">
                            <div class="px-4 pb-14">
                                <div class="pt-3">
                                    <div class="rules-container" [innerHTML]="rulesInfo?.rules"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
}

@if(runs){
<div class="rules-overlay">
    <div class="rules-bg"></div>
    <div class="rule-wrapper px-2 md:px-4 popUpOpenAnimation1 !h-auto gap-4">
        <button class="flex justify-end" (click)="runs = false" type="button" aria-label="Close" title="Close">
            <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 16 16" fill="#fff"
                class="close-rules-btn">
                <g clip-path="url(#clip0_406_1676)">
                    <path
                        d="M9.46585 8.01314L15.6959 1.78287C16.1014 1.37762 16.1014 0.722377 15.6959 0.317124C15.2907 -0.0881297 14.6354 -0.0881297 14.2302 0.317124L7.99991 6.5474L1.76983 0.317124C1.36438 -0.0881297 0.709336 -0.0881297 0.304082 0.317124C-0.101361 0.722377 -0.101361 1.37762 0.304082 1.78287L6.53416 8.01314L0.304082 14.2434C-0.101361 14.6487 -0.101361 15.3039 0.304082 15.7092C0.506045 15.9113 0.771595 16.0129 1.03695 16.0129C1.30232 16.0129 1.56768 15.9113 1.76983 15.7092L7.99991 9.47889L14.2302 15.7092C14.4323 15.9113 14.6977 16.0129 14.9631 16.0129C15.2284 16.0129 15.4938 15.9113 15.6959 15.7092C16.1014 15.3039 16.1014 14.6487 15.6959 14.2434L9.46585 8.01314Z"
                        fill="#fff"></path>
                </g>
                <defs>
                    <clipPath id="clip0_406_1676">
                        <rect width="16" height="16" fill="#fff"></rect>
                    </clipPath>
                </defs>
            </svg>
        </button>
        <div class="wrapper grid gap-2">
            <div class="grid grid-cols-2 gap-1.5">
                <div class="text-white flex justify-center">Runs</div>
                <div class="text-white flex justify-center">Account</div>
            </div>
            <div class="grid grid-cols-2 gap-1.5" *ngFor="let item of fancyBook"
                [ngClass]="item?.value>0?'bg-bg_backBtnBgColor':'bg-bg_layBtnBgColor'">
                <div class="runs border-r border-black">{{item.key}}</div>
                <div class="runs border-l border-black">{{item.value}}</div>
            </div>
        </div>
    </div>
</div>
}